>                                             > PRINTFUL_API_KEY=BkycLM6MDIBjAhOgEpYxkkYPdPMbUeTmhycr75tN                                 > PRINTFUL_STORE_ID=17263844                  > EOF                                         root@WOPR:/opt/thedudeabides-store# cd /opt/printful-sync                                   root@WOPR:/opt/printful-sync#                 root@WOPR:/opt/printful-sync# docker compose down                                           WARN[0000] /opt/printful-sync/docker-compose.yml: `version` is obsolete                     [+] Running 0/0                               [+] Running 0/1intful-sync-printful-sync-1  St[+] Running 0/1intful-sync-printful-sync-1  St[+] Running 1/1intful-sync-printful-sync-1  St ✔ Container printful-sync-printful-sync-1  Removed0.4s                                     root@WOPR:/opt/printful-sync#                 root@WOPR:/opt/printful-sync# docker compose build --no-cache                               WARN[0000] /opt/printful-sync/docker-compose.yml: `version` is obsolete                     [+] Building 6.2s (10/10) FINISHED docker:default [printful-sync internal] load build  0.0s  => [printful-sync internal] load build  0.0s  => => transferring dockerfile: 284B     0.0s  => [printful-sync internal] load metad  0.0s  => [printful-sync internal] load .dock  0.0s  => => transferring context: 2B          0.0s  => [printful-sync 1/5] FROM docker.io/  0.0s  => [printful-sync internal] load build  0.0s  => => transferring context: 547B        0.0s  => CACHED [printful-sync 2/5] WORKDIR   0.0s  => [printful-sync 3/5] COPY requiremen  0.0s  => [printful-sync 4/5] RUN pip install  5.9s  => [printful-sync 5/5] COPY . .         0.0s  => [printful-sync] exporting to image   0.2s  => => exporting layers                  0.2s  => => writing image sha256:2fea60ed0a8  0.0s  => => naming to docker.io/library/prin  0.0s root@WOPR:/opt/printful-sync#                 root@WOPR:/opt/printful-sync# docker compose up -d                                          WARN[0000] /opt/printful-sync/docker-compose.yml: `version` is obsolete                     [+] Running 0/0                               [+] Running 1/1intful-sync-printful-sync-1  St ✔ Container printful-sync-printful-sync-1  Started0.2s                                     root@WOPR:/opt/printful-sync# docker exec -it printful-sync-printful-sync-1 env | grep SALEOR                                             SALEOR_URL=https://dudeabides.wopr.systems/graphql/                                         SALEOR_APP_TOKEN=uVEM2HyJkerckvn0u5FALpnVAG50zW                                             SALEOR_TOKEN=uVEM2HyJkerckvn0u5FALpnVAG50zW   root@WOPR:/opt/printful-sync# curl -X POST http://localhost:8055/sync                       {"synced":1,"results":[{"id":403918567,"status":"error","error":"[{'message': 'To access this path, you need one of the following permissions: MANAGE_PRODUCT_TYPES_AND_ATTRIBUTES', 'locations': [{'line': 3, 'column': 7}], 'path': ['attributeCreate'], 'extensions': {'exception': {'code': 'PermissionDenied', 'stacktrace': ['Traceback (most recent call last):', '  File \"/usr/local/lib/python3.12/site-packages/graphql/execution/executor.py\", line 452, in resolve_or_error', '    return executor.execute(resolve_fn, source, info, **args)', '           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^', '  File \"/usr/local/lib/python3.12/site-packages/graphql/execution/executors/sync.py\", line 16, in execute', '    return fn(*args, **kwargs)', '           ^^^^^^^^^^^^^^^^^^^', '  File \"/usr/local/lib/python3.12/contextlib.py\", line 81, in inner', '    return func(*args, **kwds)', '           ^^^^^^^^^^^^^^^^^^^', '  File \"/app/saleor/graphql/core/mutations.py\", line 533, in mutate', '    response = cls.perform_mutation(root, info, **data)', '               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^', '  File \"/app/saleor/graphql/attribute/mutations/attribute_create.py\", line 161, in perform_mutation', '    raise PermissionDenied(permissions=permissions)', 'saleor.core.exceptions.PermissionDenied: To access this path, you need one of the following permissions: MANAGE_PRODUCT_TYPES_AND_ATTRIBUTES']}}}]"}root@WOPR:/opt/printful-sync# docker exec -it saleor-api-dude python manage.py shell -c "   > from saleor.app.models import App           > from saleor.permission.models import Permission                                           >                                             > app = App.objects.get(name='Printful Sync') >                                             > perms = [                                   >     'manage_products',                      >     'manage_product_types_and_attributes',  > ]                                           >                                             > for codename in perms:                      >     perm = Permission.objects.get(codename=codename)                                      >     app.permissions.add(perm)               >                                             > print('OK: Permissions added:', perms)      > "                                           2025-12-02 12:51:58,374 WARNING saleor.core.jwt_manager RSA_PRIVATE_KEY is missing. Using temporary key for local development with DEBUG mode. [PID:181:MainThread]                     OK: Permissions added: ['manage_products', 'manage_product_types_and_attributes']           root@WOPR:/opt/printful-sync# docker restart saleor-api-dude                                saleor-api-dude                               root@WOPR:/opt/printful-sync# curl -X POST http://localhost:8055/sync                       {"synced":1,"results":[{"id":403918567,"status":"ok","result":{"success":true,"product_id":"UHJvZHVjdDoy","variants":17}}]}root@WOPR:/opt/root@WOPR:/opt/printful-sync# docker exec -it saleor-api-dude python manage.py shell -c "   > from saleor.product.models import Product   > from saleor.channel.models import Channel   >                                             > prod = Product.objects.first()              > channel = Channel.objects.get(slug='the-dude-abides-shop')                                >                                             > print(f'Product: {prod.name}')              > print(f'Channel: {channel.name}')           > print(f'Current channels: {list(prod.channel_listings.values_list(\"channel__slug\", flat=True))}')                                     > "                                           2025-12-02 12:55:56,873 WARNING saleor.core.jwt_manager RSA_PRIVATE_KEY is missing. Using temporary key for local development with DEBUG mode. [PID:112:MainThread]                     Traceback (most recent call last):              File "/app/manage.py", line 10, in <module>     execute_from_command_line(sys.argv)         File "/usr/local/lib/python3.12/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line                   utility.execute()                           File "/usr/local/lib/python3.12/site-packages/django/core/management/__init__.py", line 436, in execute                                     self.fetch_command(subcommand).run_from_argv(self.argv)                                   File "/usr/local/lib/python3.12/site-packages/django/core/management/base.py", line 412, in run_from_argv
    self.execute(*args, **cmd_options)          File "/usr/local/lib/python3.12/site-packages/django/core/management/base.py", line 458, in execute                                         output = self.handle(*args, **options)                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^      File "/usr/local/lib/python3.12/site-packages/django/core/management/commands/shell.py", line 117, in handle                                exec(options["command"], globals())         File "<string>", line 6, in <module>          File "/usr/local/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method                                      return getattr(self.get_queryset(), name)(*args, **kwargs)                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                File "/usr/local/lib/python3.12/site-packages/django/db/models/query.py", line 639, in get    raise self.model.DoesNotExist(            saleor.channel.models.Channel.DoesNotExist: Channel matching query does not exist.          root@WOPR:/opt/printful-sync# # Check what channels exist                                   root@WOPR:/opt/printful-sync# docker exec saleor-postgres-dude psql -U saleor -d saleor -c "SELECT id, slug, name FROM channel_channel;"   id |      slug       |      name             ----+-----------------+-----------------        1 | default-channel | Default Channel
(1 row)                                       
root@WOPR:/opt/printful-sync#                 root@WOPR:/opt/printful-sync# # If empty or missing, create it                              root@WOPR:/opt/printful-sync# docker exec -it saleor-api-dude python manage.py shell -c "   > from saleor.channel.models import Channel   >                                             > channel, created = Channel.objects.update_or_create(                                      >     slug='the-dude-abides-shop',            >     defaults={                              >         'name': 'The Dude Abides Shop',     >         'currency_code': 'USD',             >         'is_active': True,                  >         'default_country': 'US'             >     }                                       > )                                           > print(f'Channel {channel.slug}: created={created}, active={channel.is_active}')           > "                                           2025-12-02 12:58:20,455 WARNING saleor.core.jwt_manager RSA_PRIVATE_KEY is missing. Using temporary key for local development with DEBUG mode. [PID:139:MainThread]                     Channel the-dude-abides-shop: created=True, active=True                                     root@WOPR:/opt/printful-sync# docker exec -it saleor-api-dude python manage.py shell -c "   > from saleor.product.models import Product, ProductChannelListing, ProductVariantChannelListing                                          > from saleor.channel.models import Channel   > from decimal import Decimal                 >                                             > channel = Channel.objects.get(slug='the-dude-abides-shop')                                > product = Product.objects.first()           >                                             > # Publish product to channel                > listing, _ = ProductChannelListing.objects.update_or_create(                              >     product=product,                        >     channel=channel,                        >     defaults={                              >         'is_published': True,               >         'visible_in_listings': True,        >         'currency': 'USD'
>     }                                       > )                                           >                                             > # Publish all variants with pricing         > for variant in product.variants.all():      >     ProductVariantChannelListing.objects.update_or_create(                                >         variant=variant,                    >         channel=channel,                    >         defaults={                          >             'currency': 'USD',              >             'price_amount': Decimal('29.99'),                                             >             'cost_price_amount': Decimal('15.00')                                         >         }                                   >     )                                       >                                             > print(f'Published {product.name} with {product.variants.count()} variants to {channel.slug}')                                           > "                                           2025-12-02 12:59:31,525 WARNING saleor.core.jwt_manager RSA_PRIVATE_KEY is missing. Using temporary key for local development with DEBUG mode. [PID:174:MainThread]                     Published Snapback Hat with 0 variants to the-dude-abides-shop                              root@WOPR:/opt/printful-sync# docker exec -it saleor-api-dude python manage.py shell -c "   > from saleor.product.models import Product, ProductVariant                                 >                                             > print('Products:')                          > for p in Product.objects.all():             >     print(f'  {p.id}: {p.name} - {p.variants.count()} variants')                          >                                             > print()                                     > print('All variants:')                      > for v in ProductVariant.objects.all()[:5]:  >     print(f'  {v.id}: {v.name} (product_id={v.product_id})')                              > "                                           2025-12-02 13:00:29,392 WARNING saleor.core.jwt_manager RSA_PRIVATE_KEY is missing. Using temporary key for local development with DEBUG mode. [PID:201:MainThread]                     Products:                                       1: Snapback Hat - 0 variants                  2: Snapback Hat - 0 variants                                                              All variants:                                 root@WOPR:/opt/printful-sync#